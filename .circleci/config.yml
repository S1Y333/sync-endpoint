# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

jobs:
  build:

    docker:
      # choose the right version, which include the maven, otherwise the mvn deploy will fail
      - image: cimg/maven:3.8.3-jdk-8

    steps:
      - checkout

      #run mvn
      - run: mvn clean install -DskipTests=true
      - run: mvn verify

      # run tests
      - run:
         name: run tests
         command: bash ./sync-endpoint-docker-test/init.sh
